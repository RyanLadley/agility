var app=angular.module("app",["ngRoute","ngCookies"],["$locationProvider",function(a){a.html5Mode(!0)}]);app.service("postRequestService",["$http",function(a){this.request=function(b,c){var d=new FormData;return d.append("payload",JSON.stringify(c)),a.post(b,d,{withCredentials:!1,headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(a){return console.log(a),a},function(a){console.log("postRequest: Error")})}}]),app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{controller:"homeController",templateUrl:"/res/site/home/home.index.html"}).when("/list/sprint/current",{controller:"sprintController",templateUrl:"/res/site/sprint/sprint.index.html"}).when("/card/:cardId",{controller:"cardDetailsController",templateUrl:"/res/site/card/card.index.html"}).when("/create/card",{controller:"createCardController",templateUrl:"/res/site/create/create-card.index.html"}).otherwise("/",{redirectTo:"/"})}]),app.controller("addCardToSprintController",["$scope","$location","$route","postRequestService",function(a,b,c,d){d.request("/api/cards/get/backlog").then(function(b){console.log(b),a.availableCards=b.data.response}),a.cancel=function(){c.reload()},a.cardId="",a.add=function(){api_url="/api/sprint/"+a.sprint.id+"/add/card/"+a.cardId,console.log(api_url),d.request(api_url)}}]),app.controller("cardDetailsController",["$scope","$routeParams","postRequestService",function(a,b,c){c.request("/api/get/card/standard/"+b.cardId).then(function(b){console.log(b),a.card=b.data.response})}]),app.controller("cardController",["$scope",function(a){a.front=!0,a.toggleShow=function(){a.front=!a.front}}]),app.controller("createCardController",["$scope","postRequestService",function(a,b){a.newCard={cardIndex:"",cardName:"",cardType:"",cardCreated:new Date,cardUpdated:new Date,cardPoints:"",cardPoc:"",cardStatus:"Open",cardDescription:"",epicName:"Build App",epicBackgroundColor:"#5A8A5C",epicForegroundColor:"#FFFFFF",steps:[]},b.request("/api/page/create/standard",a.newCard).then(function(b){console.log(b.data.response),a.newCard.cardIndex=b.data.response.card_index,a.statuses=b.data.response.statuses,unassigned=[{id:0,first_name:"Unassigned"}],a.users=unassigned.concat(b.data.response.users),a.newCard.cardPoc=0}),a.addStep=function(){a.newCard.steps.push({task:"",assigned:"Not Assigned",status:"Open"})},a.createCard=function(){console.log("Fired"),b.request("/api/create/card",a.newCard).then(function(a){console.log("Create Card: You Probably Want to do something here")})}}]),app.controller("homeController",["$scope","postRequestService",function(a,b){a.discussion=[{cardIndex:"abc-123",cardName:"First Card",cardType:"card",user:"Chuch Jones",message:"Te pro legimus gloriatur referrentur, altera impedit gloriatur eu quo, admodum consulatu id vim. Eu homero tempor eos, mea laoreet consetetur an. Vim diam oporteat moderatius ad. Mei cu mundi fabellas, usu mundi sanctus albucius ea. Eam at aeque erroribus omittantur, eam simul mediocritatem no, nulla dicant ornatus eu mei."},{cardIndex:"abc-456",cardName:"A longer Title",cardType:"card",user:"Lama Lee",message:"Te pro legimus gloriatur referrentur, altera impedit gloriatur eu quo, admodum consulatu id vim. Eu homero tempor eos, mea laoreet consetetur an. Vim diam oporteat moderatius ad. Mei cu mundi fabellas, usu mundi sanctus albucius ea. Eam at aeque erroribus omittantur, eam simul mediocritatem no, nulla dicant ornatus eu mei."}],b.request("/api/page/home").then(function(b){a.cards=b.data.response.cards,a.sprint=b.data.response.sprint,console.log(a.sprint.id)}),a.confirmSprintClosure=function(){var a=confirm("Are you sure you want to close the sprint?\nAny card not closed will be moved to the backlog.");a&&b.request("/api/sprint/close").then(function(a){})},a.displayOpenSprint=!1}]),app.controller("openSprintController",["$scope","$location","$route","postRequestService",function(a,b,c,d){var e=["January","February","March","April","May","June","July","August","September","October","November","December"];a.sprint={name:"Sprint for "+e[(new Date).getMonth()],endDate:4},a.cancel=function(){b.url("/"),c.reload()},a.open=function(){d.request("/api/sprint/open",a.sprint)}}]),app.controller("sidebarController",["$scope","$location",function(a,b){a.abs,a.icons={epic:!1,sprint:!1,backlog:!1},a.expand=!1,a.toggleExpand=function(){a.expand=!a.expand,a.expand?(a.pos={width:"200px"},a.abs={left:"0"}):(a.pos={width:"50"},a.abs={left:"-200"})},a.$watch(function(){return b.path()},function(b){angular.forEach(a.icons,function(b,c){a.icons[c]=!1}),"/"===b?a.icons.home=!0:"/list/epic"===b?a.icons.epic=!0:"/list/sprint/current"===b?a.icons.sprint=!0:"/list/backlog"===b&&(a.icons.backlog=!0)})}]),app.controller("sprintController",["$scope","$location","postRequestService",function(a,b,c){c.request("/api/sprint/get/current_with_cards").then(function(b){console.log(b.data.status),a.sprint=b.data.response}),a.addCardPrompt=!1,a.addCard=function(){a.addCardPrompt=!0}}]),app.directive("addCardToSprint",function(){return{restrict:"E",controller:"addCardToSprintController",scope:{display:"=",sprint:"="},templateUrl:"/res/components/directives/add-card-to-sprint/add-card-to-sprint.template.html"}}),app.directive("card",function(){return{restrict:"E",controller:"cardController",scope:{card:"="},templateUrl:"/res/components/directives/card/card.template.html"}}),app.directive("discussionBoard",function(){return{restrict:"E",scope:{discussion:"="},templateUrl:"/res/components/directives/discussion-board/discussion-board.template.html"}}),app.directive("openSprint",function(){return{restrict:"E",controller:"openSprintController",scope:{display:"="},templateUrl:"/res/components/directives/open-sprint/open-sprint.template.html",link:function(a,b,c){a.toggleDisplay=function(){a.display=!1}}}}),app.directive("projectImage",function(){return{restrict:"E",scope:{card:"="},templateUrl:"/res/components/directives/project-image/project-image.template.html"}}),app.directive("sidebar",function(){return{restrict:"E",controller:"sidebarController",scope:{card:"="},templateUrl:"/res/components/directives/sidebar/sidebar.template.html"}});